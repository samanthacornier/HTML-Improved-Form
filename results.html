<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results Page</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <main>
        <h1>🍹🏄‍♀️ Contest Results 🏄‍♀️🍹</h1>
        <div>
            <h2 id="status-message"></h2>
            <h3 id="sub-message"></h3>
            <img src="https://www.travelingmom.com/wp-content/uploads/2020/03/beach-packing-suitcase-on-the-sand.png" class="mini-image">
            <h4 id="small-print"></h4>
            <h5 id="disclaimer"></h5>
            <div id="address1"></div>
            <div id="address2"></div>
        </div>
    </main>
    <script type="text/javascript">

        var urlParams = new URLSearchParams(window.location.search);

       
        let winner = Math.random() < 0.5 ? true : false

       
        let name = `${urlParams.get('firstname')} ${urlParams.get('lastname')}`
        let choice = urlParams.get('location') 
        let color = urlParams.get('color') 
        let extras = urlParams.getAll('extras')
        let email = urlParams.get('email') 
        let address = urlParams.get('address') 
        let cityStateZip = `${urlParams.get('city')}, ${urlParams.get('state')} ${urlParams.get('zip')}`
        let emailMessage = document.createElement('p')
        
        
        document.getElementById('disclaimer').textContent = `Thank you, ${name}, for entering our once in a lifetime vacation contest!`
        emailMessage.append(`${winner ? 'As our chosen winner' : 'Whenever we\'d like to send marketing materials to you'}, we will contact you via email at ${email}, and send written correspondence to the following mailbox:`)
        document.getElementById('disclaimer').append(emailMessage)
        document.getElementById('address1').textContent = address
        document.getElementById('address2').textContent = cityStateZip

        
        if (choice == 'Ibiza') {
            document.querySelector('.mini-image').src = 'https://a.cdn-hotels.com/gdcs/production64/d142/a34f9d10-b69b-11e8-a095-0242ac11000d.jpg'
        }
        else if (choice == 'Mykonos') {
            document.querySelector('.mini-image').src = 'https://www.chasingthedonkey.com/wp-content/uploads/2020/05/Greece-Travel-Blog_Where-to-Stay-In-Myknonos-Greece_Mykonos-Blu-Grecotel-Exclusive-Resort.jpg'
        }
        else if (choice == 'Amalfi Coast ') {
            document.querySelector('.mini-image').src = 'https://www.greatsmallhotels.com/photos/50277_hotel-marincanto_.jpg'
        }if (choice == 'Maldives') {
            document.querySelector('.mini-image').src = 'https://lp-cms-production.imgix.net/2020-09/The%20Nautilus%20Maldives_July19-9335.jpg'
        }

        
        if (winner) {
            document.getElementById('status-message').textContent = `Congrats, ${name}, YOU WON!`
            document.getElementById('sub-message').textContent = `PACK YOUR BAGS, YOU'RE GOING TO ${choice.toUpperCase()}!`
            document.getElementById('status-message').style.color = color || 'crimson'
            document.getElementById('small-print').textContent = `Extras (${extras.join(', ')}) must be requested upon arrival at your destination`
        }
        else {
            document.getElementById('status-message').textContent = `Sorry, ${name}, You Didn't Win This Time!`
            document.getElementById('sub-message').textContent = `Maybe you'll get to ${choice} next time!`
            document.getElementById('small-print').textContent = 'Better luck next time!'
        }
    </script>
</body>
</html>